/*jshint devel: true*//*global Modernizr: true*//*global TweenMax: true*/$(document).ready(function(){var e={init:function(){var t=$(".module");e.s.ltIe9=e.ltIe9();e.answers.init(t);e.advert.init(t)},s:{touch:!0,ani:.25,curDis:"copy",col:{},dom:{}},svgTest:function(){return Modernizr.svg?!0:!1},ltIe9:function(){var e=$("html").hasClass("lt-ie9");return e},inputType:{listeners:{touch:function(){var t=e.s.dom.mod;t.on("touchstart.usingTouch",function(){e.inputType.actions.touch()})},mouse:function(){var t=e.s.dom.mod;t.on("mousemove.usingMouse",function(){e.inputType.actions.mouse()})}},actions:{touch:function(){var t=e.s.dom.mod;e.s.touch=!0;t.off(".usingTouch");e.inputType.listeners.mouse()},mouse:function(){var t=e.s.dom.mod;e.s.touch=!1;t.off(".usingTouch");e.inputType.listeners.mouse()}}},answers:{init:function(t){var n=t.find(".copy-shell"),r=n.find("ul.answer-shell");e.s.dom.cpy=n;e.s.dom.ans=r;e.answers.listeners(r)},listeners:function(t){t.on("click","li",function(){var n=e.s.curDis;n==="copy"&&e.answers.actions.chooseOption(t)}).on("mouseenter","li",function(){var t=e.s.curDis;t==="copy"?e.answers.actions.scrollCopy($(this)):e.answers.actions.showCopy($(this))}).on("mouseleave","li",function(){var t=e.s.curDis;t==="copy"?e.answers.actions.resetCopy($(this)):e.answers.actions.showGraph($(this),0)})},actions:{startTimer:function(t){console.log("running the timer...");var n=e.s.dom.cpy,r=2*t,i=n.find(".question-shell").find(".timer");i.css({display:"block"});TweenMax.to(i,r,{width:"100%",onComplete:e.advert.actions.showAdvert,onCompleteParams:[i]})},showGraph:function(t,n){var r=e.s.ani,i=.5,s=t.find(".copy"),o=t.find(".results"),u=o.find(".bar"),a=o.find(".number"),f=a.find(".dynamic"),l={cur:0,end:33};TweenMax.to(s,r,{left:"0",opacity:"0",delay:i*n,onComplete:e.answers.actions.swapView,onCompleteParams:["results",s,o]});TweenMax.to(u,r*5,{width:"100px",delay:i*n+r});TweenMax.to(a,1,{opacity:"1",delay:i*n+r});TweenMax.to(l,r*5,{cur:l.end,delay:i*n+r,onUpdate:e.answers.actions.percentageUpdate,onUpdateParams:[l,f]})},showCopy:function(t){var n=e.s.ani,r=t.find(".copy"),i=t.find(".results"),s=i.find(".bar"),o=i.find(".number"),u=o.find(".dynamic"),a={cur:33,end:33};TweenMax.to(s,n,{width:"0",onComplete:e.answers.actions.swapView,onCompleteParams:["copy",r,i]});TweenMax.to(o,n,{opacity:"0"});TweenMax.to(a,n,{cur:0,onUpdate:e.answers.actions.percentageUpdate,onUpdateParams:[a,u]});TweenMax.to(r,n,{opacity:"1",delay:n});e.answers.actions.scrollCopy(t)},swapView:function(e,t,n){if(e==="copy"){t.css({display:"block"});n.css({display:"none"})}else{t.css({display:"none"});n.css({display:"block"})}},percentageUpdate:function(e,t){t.text(e.cur)},chooseOption:function(t){e.s.curDis="results";var n=3,r;for(var i=0;i<n;i++){r=t.find('li[data-num="'+i+'"]');e.answers.actions.showGraph(r,i)}e.answers.actions.startTimer(n,t)},scrollCopy:function(e){var t=e.find(".copy"),n=parseInt(t.css("width"),10),r=580;if(n>r){var i=n-(r-50),s=i*.02;TweenMax.to(t,s,{left:"-"+i+"px"})}},resetCopy:function(t){var n=e.s.ani,r=t.find(".copy");TweenMax.to(r,n,{left:"0"})}}},advert:{init:function(t){var n=t.find(".advert-shell"),r=n.find("a.call-to-action");e.s.dom.adv=n;e.s.dom.cta=r;e.advert.listeners(n,r)},listeners:function(t,n){var r=e.s.ani;t.on("click",".icon",function(){e.advert.actions.hideAdvert(t,r)}).on("mouseenter",".icon",function(){e.advert.actions.iconEnter(n,r)}).on("mouseleave",".icon",function(){e.advert.actions.iconLeave(n,r)})},actions:{showAdvert:function(t){console.log("---> show advert");var n=1,r=e.s.dom.adv;TweenMax.to(t,n,{opacity:"0",onComplete:e.advert.actions.changeDisplay,onCompleteParams:["hide",t]});r.css({display:"block"});TweenMax.to(r,n,{opacity:"1"})},hideAdvert:function(t,n){TweenMax.to(t,n,{opacity:"0",onComplete:e.advert.actions.changeDisplay,onCompleteParams:["hide",t]})},iconEnter:function(e,t){TweenMax.to(e,t,{opacity:"0.5"})},iconLeave:function(e,t){TweenMax.to(e,t,{opacity:"1"})},changeDisplay:function(e,t){e==="show"?t.css({display:"block"}):e==="hide"&&t.css({display:"none"})}}}};(function(){e.init()})()});